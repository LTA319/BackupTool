# MySQL 备份工具 - 文档

欢迎使用 MySQL 备份工具文档。本综合指南涵盖了在您的环境中安装、配置和使用 MySQL 备份工具所需了解的一切。

## 文档结构

### 📚 核心文档

#### [API 参考](API-Reference-Zh.md)
所有公共接口、服务和模型的完整技术文档。对于与系统集成或扩展系统的开发人员来说必不可少。

**内容：**
- 核心服务（MySQL 管理、压缩、文件传输）
- 备份管理（调度、保留策略）
- 文件操作（加密、验证）
- 通知系统（邮件、SMTP 配置）
- 数据模型和错误处理
- 使用示例和配置

#### [用户指南](User-Guide-Zh.md)
面向最终用户、系统管理员和操作员的综合指南。

**内容：**
- 入门和安装
- 配置管理
- 基本和高级操作
- 监控和故障排除
- 最佳实践和安全指南

#### [配置示例](Configuration-Examples-Zh.md)
各种部署场景的实用、即用配置示例。

**内容：**
- 基本单服务器设置
- 企业多服务器环境
- 高可用性配置
- 云部署（AWS、Azure、GCP）
- 开发环境设置
- 专用配置

#### [性能基准测试](PerformanceBenchmarking-Zh.md)
性能测试框架和优化指南。

**内容：**
- 基准测试框架
- 性能指标
- 优化策略
- 硬件建议

## 快速入门指南

### 新用户
1. 从[用户指南 - 入门](User-Guide-Zh.md#入门)开始
2. 查看[基本单服务器设置](Configuration-Examples-Zh.md#基本单服务器设置)
3. 遵循[基本操作](User-Guide-Zh.md#基本操作)指南

### 开发人员
1. 查看[API 参考](API-Reference-Zh.md)了解技术详情
2. 检查[开发环境设置](Configuration-Examples-Zh.md#开发环境设置)
3. 查看 API 参考中的集成示例

### 系统管理员
1. 阅读[企业多服务器环境](Configuration-Examples-Zh.md#企业多服务器环境)示例
2. 查看[安全最佳实践](User-Guide-Zh.md#安全最佳实践)
3. 设置[监控和故障排除](User-Guide-Zh.md#监控和故障排除)

## 功能概述

### ✅ 已实现功能

#### 核心备份功能
- **MySQL 服务管理**：安全启动/停止 MySQL 服务
- **数据压缩**：高效的 GZip 压缩，带进度报告
- **文件传输**：可靠的基于 TCP 的传输，支持恢复功能
- **日志系统**：使用 Serilog 的综合结构化日志

#### 高级功能
- **加密服务**：备份文件的 AES-256 加密
- **验证服务**：文件完整性检查和损坏检测
- **通知系统**：带模板的 SMTP 邮件通知
- **保留管理**：带可配置策略的自动清理
- **备份调度**：基于 Cron 的调度，支持后台执行

#### 企业功能
- **客户端-服务器架构**：分布式备份，集中存储
- **大文件支持**：100GB+ 数据库的分块处理
- **恢复功能**：中断传输恢复
- **多线程**：后台操作，响应式 UI
- **高可用性**：冗余备份系统，支持故障转移

### 🔧 配置选项

#### 部署场景
- **单服务器**：小型环境的基本设置
- **多服务器**：具有多个 MySQL 实例的企业环境
- **高可用性**：具有冗余的关键任务设置
- **云部署**：AWS、Azure 和 Google Cloud 配置
- **开发**：本地开发和测试环境

#### 安全功能
- **加密**：AES-256 文件加密，使用 PBKDF2 密钥派生
- **身份验证**：客户端-服务器身份验证和授权
- **网络安全**：所有通信的 TLS 支持
- **审计日志**：综合安全事件日志

## 架构概述

```
┌─────────────────┐    网络传输     ┌─────────────────┐
│   备份客户端    │◄──────────────►│  文件接收服务器  │
│                 │                │                 │
├─────────────────┤                ├─────────────────┤
│ MySQL 管理器    │                │ 分块管理器      │
│ 压缩            │                │ 存储管理器      │
│ 加密            │                │ 文件接收器      │
│ 验证            │                │ 通知            │
│ 通知            │                │ 保留管理        │
│ 调度器          │                │ 日志            │
└─────────────────┘                └─────────────────┘
        │                                   │
        ▼                                   ▼
┌─────────────────┐                ┌─────────────────┐
│   客户端配置    │                │   服务器配置    │
│    数据库       │                │    数据库       │
│   (SQLite)      │                │   (SQLite)      │
└─────────────────┘                └─────────────────┘
```

## 服务架构

### 核心服务
- **IMySQLManager**：MySQL 实例生命周期管理
- **ICompressionService**：文件压缩操作
- **IFileTransferService**：网络文件传输
- **ILoggingService**：结构化日志

### 高级服务
- **IEncryptionService**：AES-256 文件加密
- **IValidationService**：备份完整性验证
- **INotificationService**：邮件通知系统
- **IRetentionPolicyService**：自动清理管理
- **IBackupScheduler**：基于 Cron 的备份调度

### 数据模型
- **BackupConfiguration**：完整的备份作业设置
- **ScheduleConfiguration**：备份调度设置
- **RetentionPolicy**：清理策略定义
- **EmailTemplate**：通知模板
- **EncryptionMetadata**：加密信息

## 常见用例

### 日常生产备份
```json
{
  "Schedule": "0 0 2 * * *",
  "Encryption": true,
  "Compression": "Optimal",
  "Retention": "30 days",
  "Notifications": ["admin@company.com"]
}
```

### 大型数据库备份（>100GB）
```json
{
  "ChunkSize": "100MB",
  "ParallelTransfers": 4,
  "ResumeEnabled": true,
  "CompressionThreads": 4,
  "MemoryLimit": "2GB"
}
```

### 高可用性设置
```json
{
  "PrimaryServer": "backup-01.company.com",
  "SecondaryServers": [
    "backup-02.company.com",
    "backup-03.company.com"
  ],
  "FailoverTimeout": "2 minutes",
  "Replication": "Synchronous"
}
```

## 支持和资源

### 获取帮助
- **文档**：从这个综合指南开始
- **配置示例**：使用提供的模板作为起点
- **API 参考**：开发人员的技术详情
- **故障排除**：用户指南中的常见问题和解决方案

### 最佳实践
- **安全**：使用强加密和安全网络通信
- **性能**：针对您的环境和数据大小优化设置
- **监控**：设置综合日志和警报
- **测试**：定期测试备份恢复程序

### 开发
- **测试框架**：综合单元和集成测试
- **基于属性的测试**：跨所有输入的正确性验证
- **基准测试**：性能测试和优化工具
- **可扩展性**：用于自定义实现的明确定义接口

## 版本信息

**当前版本**：1.0.0  
**最后更新**：2026年1月25日  
**兼容性**：.NET 8.0、MySQL 5.7+、Windows 10+、Linux Ubuntu 20.04+

## 贡献

该项目遵循基于任务的开发方法，具有综合测试：

- **单元测试**：测试单个服务功能
- **基于属性的测试**：验证通用正确性属性
- **集成测试**：端到端工作流验证
- **性能测试**：基准测试和优化

有关开发指南和贡献说明，请参阅主项目 README。

---

**需要帮助？** 从[用户指南](User-Guide-Zh.md)开始了解一般用法，或查看[API 参考](API-Reference-Zh.md)了解技术详情。